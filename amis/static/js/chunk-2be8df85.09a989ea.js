(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2be8df85"],{"0ccb":function(e,t,n){var i=n("e330"),a=n("50c4"),r=n("577e"),o=n("1148"),s=n("1d80"),c=i(o),l=i("".slice),u=Math.ceil,d=function(e){return function(t,n,i){var o,d,f=r(s(t)),m=a(n),p=f.length,g=void 0===i?" ":r(i);return m<=p||""==g?f:(o=m-p,d=c(g,u(o/g.length)),d.length>o&&(d=l(d,0,o)),e?f+d:d+f)}};e.exports={start:d(!1),end:d(!0)}},1148:function(e,t,n){"use strict";var i=n("5926"),a=n("577e"),r=n("1d80"),o=RangeError;e.exports=function(e){var t=a(r(this)),n="",s=i(e);if(s<0||s==1/0)throw o("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},"16f5":function(e,t,n){},"25f0":function(e,t,n){"use strict";var i=n("5e77").PROPER,a=n("cb2d"),r=n("825a"),o=n("577e"),s=n("d039"),c=n("90d8"),l="toString",u=RegExp.prototype,d=u[l],f=s((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=i&&d.name!=l;(f||m)&&a(RegExp.prototype,l,(function(){var e=r(this),t=o(e.source),n=o(c(e));return"/"+t+"/"+n}),{unsafe:!0})},"2c3e":function(e,t,n){var i=n("83ab"),a=n("9f7f").MISSED_STICKY,r=n("c6b6"),o=n("edd00"),s=n("69f3").get,c=RegExp.prototype,l=TypeError;i&&a&&o(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===r(this))return!!s(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},3293:function(e,t,n){"use strict";n("ba0c")},"4d63":function(e,t,n){var i=n("83ab"),a=n("da84"),r=n("e330"),o=n("94ca"),s=n("7156"),c=n("9112"),l=n("241c").f,u=n("3a9b"),d=n("44e7"),f=n("577e"),m=n("90d8"),p=n("9f7f"),g=n("aeb0"),h=n("cb2d"),b=n("d039"),x=n("1a2d"),v=n("69f3").enforce,w=n("2626"),O=n("b622"),y=n("fce3"),k=n("107c"),S=O("match"),E=a.RegExp,C=E.prototype,R=a.SyntaxError,_=r(C.exec),I=r("".charAt),P=r("".replace),j=r("".indexOf),T=r("".slice),F=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,D=/a/g,q=new E($)!==$,A=p.MISSED_STICKY,M=p.UNSUPPORTED_Y,J=i&&(!q||A||y||k||b((function(){return D[S]=!1,E($)!=$||E(D)==D||"/a/i"!=E($,"i")}))),L=function(e){for(var t,n=e.length,i=0,a="",r=!1;i<=n;i++)t=I(e,i),"\\"!==t?r||"."!==t?("["===t?r=!0:"]"===t&&(r=!1),a+=t):a+="[\\s\\S]":a+=t+I(e,++i);return a},N=function(e){for(var t,n=e.length,i=0,a="",r=[],o={},s=!1,c=!1,l=0,u="";i<=n;i++){if(t=I(e,i),"\\"===t)t+=I(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:_(F,T(e,i+1))&&(i+=2,c=!0),a+=t,l++;continue;case">"===t&&c:if(""===u||x(o,u))throw new R("Invalid capture group name");o[u]=!0,r[r.length]=[u,l],c=!1,u="";continue}c?u+=t:a+=t}return[a,r]};if(o("RegExp",J)){for(var Y=function(e,t){var n,i,a,r,o,l,p=u(C,this),g=d(e),h=void 0===t,b=[],x=e;if(!p&&g&&h&&e.constructor===Y)return e;if((g||u(C,e))&&(e=e.source,h&&(t=m(x))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),x=e,y&&"dotAll"in $&&(i=!!t&&j(t,"s")>-1,i&&(t=P(t,/s/g,""))),n=t,A&&"sticky"in $&&(a=!!t&&j(t,"y")>-1,a&&M&&(t=P(t,/y/g,""))),k&&(r=N(e),e=r[0],b=r[1]),o=s(E(e,t),p?this:C,Y),(i||a||b.length)&&(l=v(o),i&&(l.dotAll=!0,l.raw=Y(L(e),n)),a&&(l.sticky=!0),b.length&&(l.groups=b)),e!==x)try{c(o,"source",""===x?"(?:)":x)}catch(w){}return o},U=l(E),z=0;U.length>z;)g(Y,E,U[z++]);C.constructor=Y,Y.prototype=C,h(a,"RegExp",Y,{constructor:!0})}w("RegExp")},"4d90":function(e,t,n){"use strict";var i=n("23e7"),a=n("0ccb").start,r=n("9a0c");i({target:"String",proto:!0,forced:r},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},7833:function(e,t,n){"use strict";n("16f5")},"9a0c":function(e,t,n){var i=n("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},"9ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container",style:{backgroundImage:"url("+e.backgroundImage+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[n("div",{staticClass:"bg_top"},[n("div",{staticClass:"btn_back",on:{click:e.handleIn}},[n("div",{staticClass:"btn_back_in"},[e._v("返回")])])]),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"title-container"},[n("h3",{staticClass:"title"},[e._v("物联网平台")])]),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),n("el-input",{ref:"username",attrs:{placeholder:"请输入账号",name:"username",clearable:"",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),n("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")]),n("div",{staticClass:"tips"},[n("a",{staticStyle:{margin:"0 auto",cursor:"pointer"},attrs:{href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/index",target:"_blank"}},[e._v("amis")])])],1),e.isPC?n("div",{staticStyle:{position:"absolute",bottom:"1px",left:"50%",transform:"translateX(-50%)",color:"#fff"}},[n("a",{staticStyle:{color:"#fff"},attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[e._v(" Copyright © 2022 DGIOT All Rights Reserved 浙ICP备2021037683号-1 ")])]):e._e()],1)},a=[],r=n("c7eb"),o=n("1da1"),s=(n("d9e2"),n("14d9"),n("d3b7"),n("159b"),n("b0c0"),n("e9c4"),n("61f7"),n("4e46")),c=n("ed08"),l=n("8665"),u=n("39c4"),d=(n("2f62"),n("a78e")),f=n.n(d),m=n("5f87"),p={name:"Login",data:function(){return{isPC:!0,backgroundImage:"/dgiot_dashboard/public/assets/images/platform/assets/login_images/background.jpg",url:"",loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入账号"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]},loading:!1,passwordType:"password",redirect:void 0}},mounted:function(){var e=this;this.isPC=Object(c["b"])(),console.log("是否为PC端",this.isPC),localStorage.setItem("isPC",this.isPC),this.$route.query&&(this.loginForm.username=this.$route.query.username||"",this.loginForm.password=this.$route.query.password||""),this.$nextTick(Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.defaultSet();case 2:e.backgroundImage=e.url+e.backgroundImage;case 3:case"end":return t.stop()}}),t)}))))},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then(Object(o["a"])(Object(r["a"])().mark((function t(){var n,i,a,o,c,d,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("成功"),Vue.prototype.$FileServe=f.a.get("fileServer")||"",t.next=4,Object(s["a"])();case 4:return n=t.sent,i=[],a={path:"/",url:"/",redirect:"/dashboard",meta:{title:"首页",icon:"dashboard",hidden:!1},children:[{path:"/dashboard",url:"/dashboard",name:"Dashboard",meta:{title:"首页",icon:"dashboard",hidden:!1}}]},i.push(a),n.results.forEach((function(e){"/"!=e.url&&"/roles"!=e.url&&i.push(e)})),o=e.initRoutes(i),c=[],o.forEach((function(e,t){e.children?(e.children[0].url.indexOf("amis")>=0||e.children[0].name.indexOf("Dashboard")>=0)&&c.push(e):c.push(e)})),localStorage.setItem("routes",JSON.stringify(c)),t.next=15,Object(l["a"])();case 15:return d=t.sent,localStorage.setItem("dgiotroletree",JSON.stringify(d.results)),p={UserSession:Object(m["a"])()||"",cookie:{mapType:"baidu"}},t.next=20,Object(u["c"])(p);case 20:e.$router.push({path:"/"}),e.loading=!1;case 22:case"end":return t.stop()}}),t)})))).catch((function(){e.loading=!1}))}))},initRoutes:function(e){var t=this;return e.forEach((function(e,n){e.path=e.url,e.children&&t.initRoutes(e.children),e.meta&&e.meta.icon.indexOf("dgiot_file")<0&&(e.meta.title.indexOf("云")>=0&&(e.meta.icon="el-icon-cloudy"),e.meta.title.indexOf("管理")>=0&&(e.meta.icon="el-icon-s-management"),e.meta.title.indexOf("设备管理")>=0&&(e.meta.icon="el-icon-monitor"),(e.meta.title.indexOf("运维")>=0||e.meta.title.indexOf("设置")>=0)&&(e.meta.icon="el-icon-setting"),e.meta.title.indexOf("工单")>=0&&(e.meta.icon="el-icon-s-order"),e.meta.title.indexOf("系统")>=0&&(e.meta.icon="el-icon-s-help"),e.meta.title.indexOf("告警")>=0&&(e.meta.icon="el-icon-bell"),e.meta.title.indexOf("日志")>=0&&(e.meta.icon="el-icon-notebook-1"),(e.meta.title.indexOf("园区")>=0||e.meta.title.indexOf("建筑")>=0)&&(e.meta.icon="el-icon-office-building"),e.meta.title.indexOf("工厂")>=0&&(e.meta.icon="el-icon-school"),e.meta.title.indexOf("人")>=0||e.meta.title.indexOf("员工")>=0?e.meta.icon="el-icon-user-solid":e.meta.title.indexOf("工序")>=0?e.meta.icon="el-icon-s-operation":e.meta.title.indexOf("场景")>=0?e.meta.icon="el-icon-picture-outline":e.meta.title.indexOf("质检")>=0?e.meta.icon="el-icon-circle-check":e.meta.title.indexOf("监控")>=0?e.meta.icon="el-icon-camera":e.meta.title.indexOf("票")>=0?e.meta.icon="el-icon-s-ticket":e.meta.title.indexOf("信息")>=0?e.meta.icon="el-icon-info":e.meta.title.indexOf("系统")>=0?e.meta.icon="el-icon-data-analysis":e.meta.title.indexOf("控制")>=0?e.meta.icon="el-icon-eleme":e.meta.title.indexOf("光")>=0||e.meta.title.indexOf("支路")>=0?e.meta.icon="el-icon-cpu":e.meta.title.indexOf("照明")>=0?e.meta.icon="el-icon-s-opportunity":e.meta.title.indexOf("空调")>=0?e.meta.icon="el-icon-receiving":e.meta.title.indexOf("能耗")>=0?e.meta.icon="el-icon-magic-stick":e.meta.title.indexOf("机械")>=0?e.meta.icon="material":e.meta.title.indexOf("停车")>=0&&(e.meta.icon="stop"),e.meta.title.indexOf("对战")>=0?e.meta.icon="fight":e.meta.title.indexOf("射击")>=0?e.meta.icon="shooting":e.meta.title.indexOf("跑")>=0?e.meta.icon="run":e.meta.title.indexOf("跳")>=0?e.meta.icon="jump":e.meta.title.indexOf("投")>=0&&(e.meta.icon="throw"))})),e},defaultSet:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=location.origin,f.a.set("fileServer",n,{expires:18e5}),e.url=n;case 3:case"end":return t.stop()}}),t)})))()},handleIn:function(){window.location.href=window.location.origin}}},g=p,h=(n("7833"),n("3293"),n("2877")),b=Object(h["a"])(g,i,a,!1,null,"02acfde6",null);t["default"]=b.exports},ba0c:function(e,t,n){},c607:function(e,t,n){var i=n("83ab"),a=n("fce3"),r=n("c6b6"),o=n("edd00"),s=n("69f3").get,c=RegExp.prototype,l=TypeError;i&&a&&o(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===r(this))return!!s(this).dotAll;throw l("Incompatible receiver, RegExp required")}}})},ed08:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));n("53ca"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b");function i(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t}function a(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,i=0;i<t.length;i++)if(e.indexOf(t[i])>0){n=!1;break}return n}function r(e){return e<10?"0"+e:e}function o(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n=r(n);var i=e.getDate();i=r(i);var a=e.getHours();a=r(a);var o=e.getMinutes();o=r(o);var s=e.getSeconds();s=r(s);var c=t+"-"+n+"-"+i+" "+a+":"+o+":"+s;return c}},edd00:function(e,t,n){var i=n("13d2"),a=n("9bf2");e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),a.f(e,t,n)}}}]);