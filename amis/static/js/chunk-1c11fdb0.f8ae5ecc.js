(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c11fdb0"],{"0ccb":function(e,t,n){var i=n("e330"),o=n("50c4"),a=n("577e"),r=n("1148"),s=n("1d80"),c=i(r),l=i("".slice),d=Math.ceil,u=function(e){return function(t,n,i){var r,u,f=a(s(t)),m=o(n),p=f.length,g=void 0===i?" ":a(i);return m<=p||""==g?f:(r=m-p,u=c(g,d(r/g.length)),u.length>r&&(u=l(u,0,r)),e?f+u:u+f)}};e.exports={start:u(!1),end:u(!0)}},1148:function(e,t,n){"use strict";var i=n("5926"),o=n("577e"),a=n("1d80"),r=RangeError;e.exports=function(e){var t=o(a(this)),n="",s=i(e);if(s<0||s==1/0)throw r("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},"2c3e":function(e,t,n){var i=n("83ab"),o=n("9f7f").MISSED_STICKY,a=n("c6b6"),r=n("edd0"),s=n("69f3").get,c=RegExp.prototype,l=TypeError;i&&o&&r(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!s(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},"488b":function(e,t,n){},"4d63":function(e,t,n){var i=n("83ab"),o=n("da84"),a=n("e330"),r=n("94ca"),s=n("7156"),c=n("9112"),l=n("241c").f,d=n("3a9b"),u=n("44e7"),f=n("577e"),m=n("90d8"),p=n("9f7f"),g=n("aeb0"),h=n("cb2d"),b=n("d039"),x=n("1a2d"),v=n("69f3").enforce,w=n("2626"),O=n("b622"),y=n("fce3"),k=n("107c"),S=O("match"),C=o.RegExp,E=C.prototype,_=o.SyntaxError,I=a(E.exec),R=a("".charAt),j=a("".replace),T=a("".indexOf),P=a("".slice),F=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,D=/a/g,q=new C($)!==$,A=p.MISSED_STICKY,M=p.UNSUPPORTED_Y,J=i&&(!q||A||y||k||b((function(){return D[S]=!1,C($)!=$||C(D)==D||"/a/i"!=C($,"i")}))),L=function(e){for(var t,n=e.length,i=0,o="",a=!1;i<=n;i++)t=R(e,i),"\\"!==t?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),o+=t):o+="[\\s\\S]":o+=t+R(e,++i);return o},N=function(e){for(var t,n=e.length,i=0,o="",a=[],r={},s=!1,c=!1,l=0,d="";i<=n;i++){if(t=R(e,i),"\\"===t)t+=R(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:I(F,P(e,i+1))&&(i+=2,c=!0),o+=t,l++;continue;case">"===t&&c:if(""===d||x(r,d))throw new _("Invalid capture group name");r[d]=!0,a[a.length]=[d,l],c=!1,d="";continue}c?d+=t:o+=t}return[o,a]};if(r("RegExp",J)){for(var Y=function(e,t){var n,i,o,a,r,l,p=d(E,this),g=u(e),h=void 0===t,b=[],x=e;if(!p&&g&&h&&e.constructor===Y)return e;if((g||d(E,e))&&(e=e.source,h&&(t=m(x))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),x=e,y&&"dotAll"in $&&(i=!!t&&T(t,"s")>-1,i&&(t=j(t,/s/g,""))),n=t,A&&"sticky"in $&&(o=!!t&&T(t,"y")>-1,o&&M&&(t=j(t,/y/g,""))),k&&(a=N(e),e=a[0],b=a[1]),r=s(C(e,t),p?this:E,Y),(i||o||b.length)&&(l=v(r),i&&(l.dotAll=!0,l.raw=Y(L(e),n)),o&&(l.sticky=!0),b.length&&(l.groups=b)),e!==x)try{c(r,"source",""===x?"(?:)":x)}catch(w){}return r},U=l(C),z=0;U.length>z;)g(Y,C,U[z++]);E.constructor=Y,Y.prototype=E,h(o,"RegExp",Y,{constructor:!0})}w("RegExp")},"4d90":function(e,t,n){"use strict";var i=n("23e7"),o=n("0ccb").start,a=n("9a0c");i({target:"String",proto:!0,forced:a},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"55d8":function(e,t,n){},"9a0c":function(e,t,n){var i=n("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},"9ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container",style:{backgroundImage:"url("+e.backgroundImage+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[n("div",{staticClass:"bg_top"},[n("div",{staticClass:"btn_back",on:{click:e.handleIn}},[n("div",{staticClass:"btn_back_in"},[e._v("返回")])])]),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"title-container"},[n("h3",{staticClass:"title"},[e._v("物联网平台")])]),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),n("el-input",{ref:"username",attrs:{placeholder:"请输入账号",name:"username",clearable:"",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),n("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")]),n("div",{staticClass:"tips"},[n("a",{staticStyle:{margin:"0 auto",cursor:"pointer"},attrs:{href:"https://aisuda.bce.baidu.com/amis/zh-CN/docs/index",target:"_blank"}},[e._v("amis")])])],1),e.isPC?n("div",{staticStyle:{position:"absolute",bottom:"1px",left:"50%",transform:"translateX(-50%)",color:"#fff"}},[n("a",{staticStyle:{color:"#fff"},attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[e._v(" Copyright © 2022 DGIOT All Rights Reserved 浙ICP备2021037683号-1 ")])]):e._e()],1)},o=[],a=n("c7eb"),r=n("1da1"),s=(n("d9e2"),n("14d9"),n("d3b7"),n("159b"),n("b0c0"),n("e9c4"),n("61f7"),n("4e46")),c=n("ed08"),l=n("8665"),d=n("39c4"),u=(n("2f62"),n("a78e")),f=n.n(u),m=n("5f87"),p={name:"Login",data:function(){return{isPC:!0,backgroundImage:"/dgiot_dashboard/public/assets/images/platform/assets/login_images/background.jpg",url:"",loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入账号"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},mounted:function(){var e=this;this.isPC=Object(c["b"])(),console.log("是否为PC端",this.isPC),localStorage.setItem("isPC",this.isPC),this.$route.query&&(this.loginForm.username=this.$route.query.username||"",this.loginForm.password=this.$route.query.password||""),this.$nextTick(Object(r["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.defaultSet();case 2:e.backgroundImage=e.url+e.backgroundImage;case 3:case"end":return t.stop()}}),t)}))))},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then(Object(r["a"])(Object(a["a"])().mark((function t(){var n,i,o,r,c,u,p;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("成功"),Vue.prototype.$FileServe=f.a.get("fileServer")||"",t.next=4,Object(s["a"])();case 4:return n=t.sent,i=[],o={path:"/",url:"/",redirect:"/dashboard",meta:{title:"首页",icon:"dashboard",hidden:!1},children:[{path:"/dashboard",url:"/dashboard",name:"Dashboard",meta:{title:"首页",icon:"el-icon-s-home",hidden:!1}}]},i.push(o),n.results.forEach((function(e){"/"!=e.url&&"/roles"!=e.url&&i.push(e)})),r=e.initRoutes(i),c=[],r.forEach((function(e,t){e.children?(e.children[0].url.indexOf("amis")>=0||e.children[0].name.indexOf("Dashboard")>=0)&&c.push(e):c.push(e)})),localStorage.setItem("routes",JSON.stringify(c)),t.next=15,Object(l["a"])();case 15:return u=t.sent,localStorage.setItem("dgiotroletree",JSON.stringify(u.results)),p={UserSession:Object(m["a"])()||"",cookie:{mapType:"baidu"}},t.next=20,Object(d["c"])(p);case 20:e.$router.push({path:"/"}),e.loading=!1;case 22:case"end":return t.stop()}}),t)})))).catch((function(){e.loading=!1}))}))},initRoutes:function(e){var t=this;return e.forEach((function(e,n){e.path=e.url,e.children&&t.initRoutes(e.children),e.meta&&e.meta.icon.indexOf("dgiot_file")<0&&(e.meta.title.indexOf("云")>=0&&(e.meta.icon="el-icon-cloudy"),e.meta.title.indexOf("管理")>=0&&(e.meta.icon="el-icon-s-management"),e.meta.title.indexOf("设备管理")>=0&&(e.meta.icon="el-icon-monitor"),(e.meta.title.indexOf("运维")>=0||e.meta.title.indexOf("设置")>=0)&&(e.meta.icon="el-icon-setting"),e.meta.title.indexOf("工单")>=0&&(e.meta.icon="el-icon-s-order"),e.meta.title.indexOf("系统")>=0&&(e.meta.icon="el-icon-s-help"),e.meta.title.indexOf("告警")>=0&&(e.meta.icon="el-icon-bell"),e.meta.title.indexOf("日志")>=0&&(e.meta.icon="el-icon-notebook-1"),(e.meta.title.indexOf("园区")>=0||e.meta.title.indexOf("建筑")>=0)&&(e.meta.icon="el-icon-office-building"),e.meta.title.indexOf("工厂")>=0&&(e.meta.icon="el-icon-school"),e.meta.title.indexOf("人")>=0||e.meta.title.indexOf("员工")>=0?e.meta.icon="el-icon-user-solid":e.meta.title.indexOf("工序")>=0?e.meta.icon="el-icon-s-operation":e.meta.title.indexOf("场景")>=0?e.meta.icon="el-icon-picture-outline":e.meta.title.indexOf("质检")>=0?e.meta.icon="el-icon-circle-check":e.meta.title.indexOf("监控")>=0?e.meta.icon="el-icon-camera":e.meta.title.indexOf("票")>=0?e.meta.icon="el-icon-s-ticket":e.meta.title.indexOf("信息")>=0?e.meta.icon="el-icon-info":e.meta.title.indexOf("系统")>=0?e.meta.icon="el-icon-data-analysis":e.meta.title.indexOf("控制")>=0?e.meta.icon="el-icon-eleme":e.meta.title.indexOf("光")>=0||e.meta.title.indexOf("支路")>=0?e.meta.icon="el-icon-cpu":e.meta.title.indexOf("照明")>=0?e.meta.icon="el-icon-s-opportunity":e.meta.title.indexOf("空调")>=0?e.meta.icon="el-icon-receiving":e.meta.title.indexOf("能耗")>=0?e.meta.icon="el-icon-magic-stick":e.meta.title.indexOf("机械")>=0?e.meta.icon="material":e.meta.title.indexOf("停车")>=0&&(e.meta.icon="stop"),e.meta.title.indexOf("对战")>=0?e.meta.icon="fight":e.meta.title.indexOf("射击")>=0?e.meta.icon="shooting":e.meta.title.indexOf("跑")>=0?e.meta.icon="run":e.meta.title.indexOf("跳")>=0?e.meta.icon="jump":e.meta.title.indexOf("投")>=0&&(e.meta.icon="throw"))})),console.log("routes",e),e},defaultSet:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=location.origin,f.a.set("fileServer",n,{expires:18e5}),e.url=n;case 3:case"end":return t.stop()}}),t)})))()},handleIn:function(){window.location.href=window.location.origin}}},g=p,h=(n("f56d"),n("b5e2"),n("2877")),b=Object(h["a"])(g,i,o,!1,null,"2916a246",null);t["default"]=b.exports},b5e2:function(e,t,n){"use strict";n("488b")},c607:function(e,t,n){var i=n("83ab"),o=n("fce3"),a=n("c6b6"),r=n("edd0"),s=n("69f3").get,c=RegExp.prototype,l=TypeError;i&&o&&r(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!s(this).dotAll;throw l("Incompatible receiver, RegExp required")}}})},ed08:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));n("53ca"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b");function i(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t}function o(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,i=0;i<t.length;i++)if(e.indexOf(t[i])>0){n=!1;break}return n}function a(e){return e<10?"0"+e:e}function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n=a(n);var i=e.getDate();i=a(i);var o=e.getHours();o=a(o);var r=e.getMinutes();r=a(r);var s=e.getSeconds();s=a(s);var c=t+"-"+n+"-"+i+" "+o+":"+r+":"+s;return c}},edd0:function(e,t,n){var i=n("13d2"),o=n("9bf2");e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),o.f(e,t,n)}},f56d:function(e,t,n){"use strict";n("55d8")}}]);